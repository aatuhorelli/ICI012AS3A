# H2 - Break and unbreak

Tehtävänannot luettavissa https://terokarvinen.com/application-hacking/.

Tehtävissä käytetty laitteisto:
 ````
Isäntälaite: Macbook Pro
 Käyttöjärjestelmä: macOS Sequoia 15.1
 Prosessori: M1 Pro (Apple silicon)
 RAM: 16GB

Virtuaalikoneen tiedot:
 OS: Debian 12 Bookworm
 RAM: 4GB 
 Virtualisointi: UTM
````

## x) Lue ja tiivistä

### OWASP: OWASP Top 10: A01 Broken Access Control

 - Broken Access Control on OWASP Top 10 -haavoittuvuuslistauksen kärkipaikalla
 - Pääsynhallinnan tarkoituksena on sallia käyttäjien toimet vain omien oikeuksiensa puitteissa
   - Epäonnistuessaan mahdollistaa tiedon vuotamisen, muuttumisen tai poistamisen, sekä käyttöoikeuksien ulkopuolisten toimintojen käytön
 - Yleisimmät pääsynhallinnan haavoittuvuudet:
   - Least privilege ja deny by default -periaatteiden noudattamatta jättäminen
   - Rajapinnat (API) liittyvät haavoittuvuudet:
     - POST, UPDATE ja DELETE puutteelliset käyttöoikeudet
     - API-pyyntöjen muokkaus hyökkäystyökaluja hyödyntämällä
   - IDOR(Insecure Direct Object References). Tietoihin pääsee suoraan käsiksi viittauksia muuttamalla.
   - 
 - Ennaltaehkäisy:
   - Asd plöö

### Karvinen 2023: Find Hidden Web Directories - Fuzz URLs with ffuf

### PortSwigger: Access control vulnerabilities and privilege escalation

### Karvinen 2006: Raportin kirjoittaminen

### Vapaaehtoinen: PortSwigger 2020: What is SQL injection? - Web Security Academy (noin 10 min video)


## a) Murtaudu 010-staff-only

For the report, explain

Environment
OS, browser, hardware, network
Any precautions taken
For example: if using automated crawlers and fuzzers you're not familiar yet, disconnecting Internet when running the tools.
Hack
What methods you used for testing the applications (successfull and unsuccesfull).
What the vulnerability is?
How to exploit the vulnerability and how each part of your exploit work.
Refer all documentation and sources you used
Fix
Which area of code has the mistake
What the mistake is? Do you have a guess how programmer has made this mistake?
How does your fix work?
Does your fix have any downsides? Any areas that should be checked or explored in the future?
Refer all documentation and sources you used
Reflect
What kind of targets could have this type of vulnerability?
Is this likely to be common or realistic scennario?
How could this vulnerability be avoided?
Any other lessons learned.

## b) Korjaa 010-staff-only haavoittuvuus lähdekoodista. Osoita testillä, että ratkaisusi toimii.

## c) Dirfuzt-1

## d) Murtaudu 020-your-eyes-only

## e) Korjaa 020-your-eyes-only haavoittuvuus

## Lähteet:

Karvinen 2024: New Course: Application Hacking. Luettavissa https://terokarvinen.com/application-hacking/. Luettu 30.10.2024.
OWASP: OWASP Top 10: A01 Broken access control. Luettavissa https://owasp.org/Top10/A01_2021-Broken_Access_Control/. Luettu 30.10.2024.
Karvinen 2023: Find Hidden Web Directories - Fuzz URLs with ffuf. Luettavissa https://terokarvinen.com/2023/fuzz-urls-find-hidden-directories/. Luettu 30.10.2024.
PortSwigger: Access control vulnerabilities and privilege escalation. Luettavissa https://portswigger.net/web-security/access-control. Luettu 30.10.2024.
Karvinen 2006: Raportin kirjoittaminen. Luettavissa https://terokarvinen.com/2006/raportin-kirjoittaminen-4/. Luettu 30.10.2024.
Karvinen 2024: Hack 'n fix. Luettavissa https://terokarvinen.com/hack-n-fix/. Luettu 30.10.2024.

